<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${movie.title}">Film r√©szletei</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/details_style.css}">
</head>
<body class="container mt-4">

<a th:href="@{/movies}" class="btn btn-secondary mb-3">‚¨Ö Vissza</a>

<div class="row">
    <div class="col-md-4">
        <img class="img-fluid"
             th:src="${movie.img}"
             th:alt="${movie.title + ' plak√°tja'}"
             alt="Plak√°t">
    </div>
    <div class="col-md-8">
        <h2 th:text="${movie.title}">C√≠m</h2>
        <p><strong>Rendez≈ë:</strong> <span th:text="${movie.director}"></span></p>
        <p><strong>√âv:</strong> <span th:text="${movie.year}"></span></p>
        <p><strong>M≈±faj:</strong> <span th:text="${movie.genre}"></span></p>
        <p><strong>Szerepl≈ëk:</strong> <span th:text="${movie.actors}"></span></p>
        <p><strong>Le√≠r√°s:</strong> <span th:text="${movie.description}"></span></p>
    </div>
</div>

<hr>

<h4>V√©lem√©nyek:</h4>

<div th:if="${#lists.isEmpty(reviews)}">
    <p>M√©g nincsenek √©rt√©kel√©sek ehhez a filmhez.</p>
</div>

<ul class="list-group mb-3" th:if="${!#lists.isEmpty(reviews)}">
    <li class="list-group-item" th:each="review : ${reviews}">
        <strong th:text="${review.reviewerName}">N√©v</strong>
        (<span th:text="${review.rating}">√ârt√©kel√©s</span>/10):
        <em th:text="${review.comment}">Komment</em>

        <span sec:authorize="isAuthenticated()">
            <span th:if="${review.reviewerName == loggedInUser}">
                <a th:href="@{'/reviews/edit/' + ${review.id}}" class="btn btn-sm btn-outline-warning ms-2">
                    ‚úèÔ∏è Szerkeszt√©s
                </a>
                <a th:href="@{'/reviews/delete/' + ${review.id}}"
                   onclick="return confirm('Biztosan t√∂rl√∂d ezt az √©rt√©kel√©st?')"
                   class="btn btn-sm btn-outline-danger ms-2">
                    üóëÔ∏è T√∂rl√©s
                </a>
            </span>
        </span>
    </li>
</ul>

<div sec:authorize="isAuthenticated()">
    <a th:href="@{'/movies/' + ${movie.id} + '/reviews/new'}" class="btn btn-primary">
        ‚ûï √ârt√©kel√©s hozz√°ad√°sa
    </a>
</div>

</body>
</html>
